---
title: "DFS 와 BFS 란? 탐색 알고리즘 구현 및 이해하기 #2"
excerpt: "DFS 와 BFS 란 무엇인지 알아보고 탐색 알고리즘에 대해서 알아본다."

categories:
    - Algorithm
    - Python
tags:
    - Algorithm
    - Python
    - DFS
    - BFS
last_modified_at: 2020-12-29T21:31:00+09:00

---

앞서 DFS와 BFS를 알려면 꼭 알아야 하는 자료구조인 큐와 스택 그리고 재귀함수를 설명했으니 이제 본격적으로 DFS와 BFS가 무엇인지 알아보자.

## 1. DFS

DFS란? Depth-First Search 의 약자로 깊이 우선 탑색이라고 부른다. 즉, 그래프 에서 깊은 곳을 먼저 탐색하는 알고리즘이다.

### 1.1. 그래프

그래프라는 자료구조는 기본적으로 노드(Node)와 간선(Edge)로 표현되고 이때 노드를 정점(Vertex)라고 말하기도 한다.

그래프에서의 탐색은 이처럼 하나의 노드에서 부터 시작하여 여러 노드를 방문하게 된다.

두개의 노드가 간선으로 연결되어 있다면 이를 인접한(Adjacent) 두 노드라고 표현한다.

그래프는 보통 2가지 형태로 표현된다.

1. 인접 행렬(Adjacency Matrix): 2차원 배열로 그래프의 연결관계를 표현하는 방법
2. 인접 리스트(Adjacency List): 리스트로 그래프의 연결관계를 표현하는 방법


 | 0 | 1 | 2
---------|----------|---------|----------
 0 | 0 | 7 | 5
 1 | 7 | 0 | 무한
 2 | 5 | 무한 | 0

인접 행렬(Adjacency Matrix)로 표현하는 방식은 2차원 배열에 각 노드가 연결된 형태를 저장한다. 파이썬 에서는 2차원 리스트로 구현할 수 있다.

이때 연결 되지 않는 노드들 간에는 무한(infinity)라고 표현한다. 보통 99999, 9887654321 등을 사용하곤 한다.

아래는 인접 행렬을 사용한 예시 코드다.

```python
INF = 999999999

graph = [
    [0, 7, 5],
    [7, 0, INF],
    [5, INF, 0]
]

print(graph)

```
**출력**
```
[[0, 7, 5], [7, 0, 999999999], [5, 999999999, 0]]
```

그럼 인접 리스트의 경우에는 어떨까? 이때는 보통 연결 리스트 자료형을 사용하게 되는데, 파이썬에서는 (2차원)리스트로 구현하면 된다.

아래는 그 예시 코드이다.

```python
# 행이 3개인 2차원 리스트
graph = [[] for _ in range(3)]

# 노드 0에 연결된 노드 정보 (노드, 거리)
graph[0].append((1, 7))
graph[0].append((2, 5))

# 노드 1
graph[1].append((0, 7))

# 노드 2
graph[2].append((0, 5))

print(graph)

```

**결과**

```
[[(1, 7), (2, 5)], [(0, 7)], [(0, 5)]]
```

이 두 가지 방법은 다른 만큼 각기 다른 장단점이 생기기 마련인데, 인접 행렬 방식은 모든 노드와의 관계를 전부 저장하기 때문에 노드의 양이 증가할 수록 메모리를 낭비하게된다. 반면 인접 리스트 방식은 연결된 노드만 저장하므로 메모리에 있어서는 효율적이나 인접 행렬 방식에 비해서는 속도가 느리다. 연결 리스트에서 하나 하나 확인 해야하기 때문이다.

다시 DFS로 넘어와서. DFS는 깊이 우선 탐색 알고리즘이다. 즉 특정 경로로 탐색을 하다 특정 상황에서 최대한 깊숙이 들어가서 노드를 순회하고 다시 다른 경로를 탐색하는 알고리즘이다.

이는 스택으로 구현될 수 있으며, 방식은 아래와 같다.

1. 탐색을 시작하는 노드를 스택에 삽입하고 방문 처리한다.
2. 스택의 최상단 노드에 방문하지 않은 인접 노드가 있으면 그 인접 노드를 스택에 넣고 방문 처리한다. 방문하지 않은 인접 노드가 없으면 스택의 최상단 노드를 꺼낸다.
3. 2번의 과정을 수행할 수 없을 때 까지 이 과정을 반복한다.

![picture 1](/assets/images/clipboard/graph_%EC%98%88%EC%8B%9C.png)  

### 1.2. DFS 파이썬 구현 코드

```python
def dfs(graph, v, visited):
    # 현재 노드 방문 처리
    visited[v] = True
    print(v, end=' ')

    # 현재 노드와 연결된 다른 노드 방문 (재귀)
    for i in graph[v]:
        if not visited[i]:
            dfs(graph, i, visited)


graph = [
    [],
    [2, 3, 8],
    [1, 7],
    [1, 4, 5],
    [3, 5],
    [3, 4],
    [7],
    [2, 6, 8],
    [1, 7]
]

# 각 노드가 방문된 정보 리스트
visited = [False] * 9

dfs(graph, 1, visited)

```

**결과**
```
1 2 7 6 8 3 4 5 
```

## 2. BFS

BFS는 Breadth First Search의 약자이며, 너비 우선 탐색의 뜻을 가진다. 즉 가까운 노드 부터 먼저 방문하는 전략을 가진다.

큐를 사용하는데 큐에 인접한 노드를 반복해서 넣으면 자연스럽게 먼저 들어온게 먼저 나가므로 가까운 노드부터 탐색하게된다.

1. 탐색 시작 노드를 큐에 넣고 방문 처리한다.
2. 큐에서 노드를 꺼내 해당 노드의 인접 노드 중에서 방문하지 않은 노드를 모두 큐에 넣고 방문 처리 한다.
3. 2번 과정을 할 수 없을 때까지 반복한다.

BFS의 탐색 시간은 O(N) 이며, 일반적으로 DFS 보다 수행 시간이 좋은 편이다.

> 참고로 DFS를 재귀로 구현하면 컴퓨터에 따라서 실제 프로그램 수행 시간이 느려질 수 있다고한다. 그래서 스택 라이브러리를 사용해서 이를 완화하는 테크닉이 필요하는데 현재 책에서는 범위를 벗어나 저자가 생략했다.

### 2.1. BFS 파이썬 구현 코드

아래는 예제 코드이다.

```python
from collections import deque


def bfs(graph, start, visited):
    queue = deque([start])

    # 현재 노드 방문 처리
    visited[start] = True

    # 큐가 빌 때까지 반복
    while queue:
        # 큐에서 하나 뽑아 출력
        v = queue.popleft()
        print(v, end=' ')

        # 해당 원소와 인접한, 방문x인 원소 삽입
        for i in graph[v]:
            if not visited[i]:
                queue.append(i)
                visited[i] = True


graph = [
    [],
    [2, 3, 8],
    [1, 7],
    [1, 4, 5],
    [3, 5],
    [3, 4],
    [7],
    [2, 6, 8],
    [1, 7]
]

# 각 노드가 방문된 정보 리스트
visited = [False] * 9

bfs(graph, 1, visited)

```

**결과**
```
1 2 3 8 7 4 5 6 
```

## 3. 요약


 | DFS | BFS
---------|----------|---------
 동작 원리 | 스택 | 큐
 구현 방법 | 재귀 함수 이용 | 큐 자료구조 이용

그래프를 나타낸 모양 말고도 1차원 배열 또는 2차원 배열도 그래프 형태로 생각하면 문제를 훨신 간단하게 풀 수 있는 경우도 있다고한다. 따라서 탐색 문제가 나오는 경우 그래프로 표현해서 풀어보면 좋을 수 있다.

**관련 글**
- [DFS 와 BFS 란? 탐색과 자료구조 알고리즘 이해하기 #1]({{ site.url }}/algorithm/python/Search-Data-Structure-DFS-BFS/){: target="_blank"}

**Recommend:**  
- [백준 1003번: 피보나치함수 파이썬 문제풀이 (BOJ 1003)]({{ site.url }}/algorithm/python/BOJ-1003/){: target="_blank"}
- [알고리즘 코딩테스트 자주 쓰는 파이썬 코드 : 입출력]({{ site.url }}/python/algorithm/python-input-output-tips/){: target="_blank"}
- [깃허브(GitHub) 블로그 시작하기 Jekyll로 쉽게 만드는 방법]({{ site.url }}/blog/How-to-Create-a-GitHub-Blog/){: target="_blank"}    
- [구현 알고리즘 기초 문제 : 상하좌우 (파이썬)]({{ site.url }}/algorithm/python/BOJ-5585/){: target="_blank"}
- [그리디 알고리즘 기초 문제 : 1이 될 때까지 (파이썬)]({{ site.url }}/algorithm/python/알고리즘-구현-상하좌우-문제/){: target="_blank"}